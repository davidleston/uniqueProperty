angular.module("davidLeston.uniqueProperty",[]).directive("uniqueProperty",function(){"use strict";return{restrict:"A",require:"ngModel",scope:{object:"=uniquePropertyObject",collection:"=uniquePropertyCollection",propertyPath:"@uniquePropertyPath"},link:function(t,o,e,n){var r="uniqueProperty_"+_.chain(t.propertyPath).toPath().join("_").value();n.$validators[r]=function(o){return!t.object||!t.propertyPath||!_.chain(t.collection).values().without(t.object).map(t.propertyPath).compact().includes(o).value()};var i=_.noop,c=function(){i(),i=t.$watchGroup(_.map(t.collection,function(o){return function(){return _.get(o,t.propertyPath)}}),n.$validate)},u=_.noop,a=function(){u(),u=t.$watchCollection("collection",function(){c(),n.$validate()})};t.$watchGroup(["object","collection","propertyPath"],function(){a(),n.$validate()}),a(),n.$validate()}}});